## <sub><img src="koshian_tab_controller/icons/icon-48.png"></sub> KOSHIAN タブ制御
この Firefoxアドオンはふたば☆ちゃんねるのカタログで既に開いているスレをクリックしたときに新しいタブを開かずに該当スレのタブに移動することができます。  
ダブルクリックでスレのタブとカタログのタブを移動することもできます。  

※このアドオンは WebExtensionアドオン対応の Firefox専用となります。  
※他の KOSHIAN改変版などのふたば閲覧支援ツールは[こちら](https://github.com/akoya-tomo/futaba_auto_reloader_K/wiki/)。  

## 機能
* カタログから既に開いているスレをクリックしたら該当スレのタブに移動
  - 新しくタブを開かないので [Duplicate Tabs Closer](https://addons.mozilla.org/ja/firefox/addon/duplicate-tabs-closer/) などの重複したタブを閉じて既に開いているタブに移動するアドオンは不要です。  
* 新しいスレをバックグラウンドで開く（デフォルト：無効）
  - 新しいスレを開くときに開いたスレのタブに移動するかバックグラウンドで開いて移動しないかを設定します。（Firefox のオプションより優先されます）  
    Ctrl (Cmd) ＋ 左クリックで設定と逆の動作になります。  
* 左ダブルクリックでスレのタブとカタログのタブを移動（デフォルト：無効）
  - スレのページ内で左ダブルクリックするとそのスレの板のカタログのタブに移動します。  
  - カタログのページ内で左ダブルクリックすると最後に左ダブルクリックでカタログに移動したスレのタブに戻ります。  
  - 特定の範囲内では左ダブルクリックによる移動を無効にすることができます。（デフォルト：無効）  
  - 該当するタブが既に閉じられていて存在しない場合は移動しません。  
* 右ダブルクリックで新着レスのあるスレのタブに移動（デフォルト：無効）
  - スレ・カタログ・\[n\]ページで右ダブルクリックすると [futaba auto reloader K](https://greasyfork.org/ja/scripts/36235-futaba-auto-reloader-k) の新着レス表示があるスレのタブを順番に移動します。  
  - 新着レスのあるスレが無いときはカタログ・\[n\]ページのタブを順番に移動します。  
  - 右ダブルクリックを受け付ける時間を設定できます。（デフォルト：350ms）  
  - 右ダブルクリック後に表示されるコンテキストメニューが邪魔なときは  
    「右ボタンを設定時間以上長押しでコンテキストメニュー表示」を設定してコンテキストメニューを表示するときに右ボタンを長押しすることで、右ダブルクリック時のコンテキストメニューの表示を回避できます。  
    （デフォルト：0ms = 右クリックで常にコンテキストメニュー表示）  

## インストール
**GitHub**  
[![インストールボタン](images/install_button.png "クリックでアドオンをインストール")](https://github.com/akoya-tomo/koshian_tab_controller/releases/download/v0.1.2/koshian_tab_controller-0.1.2-fx.xpi)

※このアドオンは実験的アドオンになります。  
※「接続エラーのため、アドオンをダウンロードできませんでした。」と表示されてインストール出来ない時はリンクを右クリックして xpiファイルをダウンロードし、メニューのツール→アドオン（または Ctrl + Shift + A）で表示されたアドオンマネージャーのページに xpiファイルをドラッグ＆ドロップして下さい。  

## 注意事項
* 「ダブルクリックでスレ⇔カタログを移動する」を有効にするときは [futaba move to catalog](https://greasyfork.org/ja/scripts/36988-futaba-move-to-catalog) スクリプトは無効にしてください。  
* 中クリックでスレを開くとスレのタブがあっても移動せずに新しいタブを別に開きます。  
* `about:config` で `privacy.resistFingerprinting` が `true` に設定されている場合、右ダブルクリックや長押しの検出が不安定になる可能性があります。  

## Tips
* [MouseGestureL.ahk](http://hp.vector.co.jp/authors/VA018351/mglahk.html) 使用時は「右ボタンを設定時間以上長押しでコンテキストメニュー表示」が動作しません。  
  （長押ししても必ずクリック動作になるため）  
  MouseGestureL.ahk の設定から「ボタンを放した後に追加ジェスチャーの入力を許容する時間」を設定して `RB__RB__` ジェスチャー（右ボタンクリック2回）に以下の設定をすることで新着レスのあるスレに移動後コンテキストメニューを隠すことができます。（空きボタンに割り当てでも可）  

  ```
  MG_Click("RB",,2)
  sleep, 200
  Send, {Escape}
  ```

  2行目の sleep の時間は環境に合わせて調整してください。  
  ターゲットを Firefox限定にすることで他への影響を抑えられます。  

## 更新履歴
* v0.1.2 2019-07-10
  - 新しいスレを開くときに移動しないことがある不具合を修正
* v0.1.1 2019-06-24
  - Firefox 67 以前で右ダブルクリックの移動が誤動作する不具合を修正
  - アドオンが動作する Firefox のバージョンを57以降に変更
* v0.1.0 2019-06-23
  - 新規リリース
